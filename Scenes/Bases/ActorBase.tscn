[gd_scene load_steps=16 format=3 uid="uid://btkur06oqxvuf"]

[ext_resource type="Script" uid="uid://dkmto0r2cdbdv" path="res://Scripts/Actor_scripts/Unit.gd" id="1_tpmiq"]
[ext_resource type="Script" uid="uid://1ie2vdhk6igc" path="res://Scripts/ActorRenderer.gd" id="2_tpmiq"]
[ext_resource type="ArrayMesh" uid="uid://dku333w2w1vuk" path="res://Assets/Models/Hex/HexTile.res" id="3_tpmiq"]
[ext_resource type="PackedScene" uid="uid://btwqxn54ps0ie" path="res://Scenes/Models/TestModel.tscn" id="3_vqg2v"]
[ext_resource type="Shader" uid="uid://da0yr61dab25m" path="res://Scripts/Shaders/actor_renderer_shader.gdshader" id="5_umoby"]
[ext_resource type="Texture2D" uid="uid://5vcqtak3qdc7" path="res://Assets/Icons/speed_icon.svg" id="6_p3l8k"]
[ext_resource type="Texture2D" uid="uid://b1vyqomjd60t0" path="res://Assets/Icons/strength_icon.svg" id="7_ljuny"]


[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_tpmiq"]
no_depth_test = true
shading_mode = 0
vertex_color_use_as_albedo = true

[sub_resource type="CylinderMesh" id="CylinderMesh_ljuny"]
top_radius = 0.05
bottom_radius = 0.0
height = 0.01

[sub_resource type="MultiMesh" id="MultiMesh_6vd22"]
transform_format = 1
use_colors = true
instance_count = 4
mesh = SubResource("CylinderMesh_ljuny")
buffer = PackedFloat32Array(1, 0, 0, 1.38, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0.465, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0.27058825, 0, 1, 1, 0, 0, 0.69, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0.64705884, 0, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0.455, 1, 1, 0, 1)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_6vd22"]
render_priority = 0
shader = ExtResource("5_umoby")
shader_parameter/offset = Vector2(-14, 140)
shader_parameter/sprite = ExtResource("6_p3l8k")

[sub_resource type="QuadMesh" id="QuadMesh_a7l81"]
size = Vector2(2, 2)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_wbdc1"]
render_priority = 0
shader = ExtResource("5_umoby")
shader_parameter/offset = Vector2(122, -114)
shader_parameter/sprite = ExtResource("7_ljuny")

[sub_resource type="ViewportTexture" id="ViewportTexture_ljuny"]
viewport_path = NodePath("NumericalPower/Viewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_6vd22"]
viewport_path = NodePath("NumericalPower/Viewport")

[node name="Actor" type="Node3D"]
script = ExtResource("1_tpmiq")
max_speed = 3
health = 2
card_id = "test_card"
start_color = Color(1, 1, 1, 1)

[node name="Model" type="Node3D" parent="."]
script = ExtResource("2_tpmiq")
model = ExtResource("3_vqg2v")
offsets = Array[PackedVector2Array]([PackedVector2Array(0, 0), PackedVector2Array(0.915, -0.035, -0.345, 0), PackedVector2Array(0.815, 0.025, -0.44, 0, 0, 0), PackedVector2Array(1.38, 0, 0.465, 0, 0.69, 0, 0, 0.455), PackedVector2Array(0.015, 0, 0, 0, 0, 0, 0, 0, 0, -0.315), PackedVector2Array(0.015, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.255), PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, -0.22, 0, -0.495, 0), PackedVector2Array(-0.585, 0, 0.67, 0, -0.325, 0.61, 0.43, -0.595, 0.395, 0.51, -0.22, -0.545, -0.23, 0.3, 0.03, 0), PackedVector2Array(0, 0, 0.89, 0, 0.685, 0, 0.505, 0, 0.385, 0, 0.29, 0, 0, 0.29, 0, -0.23, 0, -0.355)])
show_offset = 4
current_offset = PackedVector2Array(1.38, 0, 0.465, 0, 0.69, 0, 0, 0.455)

[node name="Gizmo" type="MultiMeshInstance3D" parent="Model"]
material_override = SubResource("StandardMaterial3D_tpmiq")
multimesh = SubResource("MultiMesh_6vd22")

[node name="HexTile" type="MeshInstance3D" parent="Model/Gizmo"]
transform = Transform3D(-4.371139e-08, -1, -4.371139e-08, 0, -4.371139e-08, 1, -1, 4.371139e-08, 1.9106855e-15, 0, 0, 0)
mesh = ExtResource("3_tpmiq")
skeleton = NodePath("../../..")

[node name="ShaderPreview" type="MeshInstance3D" parent="Model/Gizmo"]
material_override = SubResource("ShaderMaterial_6vd22")
mesh = SubResource("QuadMesh_a7l81")

[node name="ShaderPreview2" type="MeshInstance3D" parent="Model/Gizmo"]
material_override = SubResource("ShaderMaterial_wbdc1")
mesh = SubResource("QuadMesh_a7l81")

[node name="NumericalPower" type="Sprite3D" parent="."]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0.7543679, 0, 0.50363874)
billboard = 1
no_depth_test = true
texture = SubResource("ViewportTexture_ljuny")

[node name="Viewport" type="SubViewport" parent="NumericalPower"]
own_world_3d = true
transparent_bg = true
size = Vector2i(256, 256)

[node name="background" type="ColorRect" parent="NumericalPower/Viewport"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.17, 0.17, 0.17, 1)

[node name="Border" type="ColorRect" parent="NumericalPower/Viewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 19.999878
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
rotation = 0.7853982
scale = Vector2(4.5, 4.5)
pivot_offset = Vector2(20, 20)
color = Color(0.6955032, 0.6955031, 0.6955031, 1)

[node name="Fill" type="ColorRect" parent="NumericalPower/Viewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 19.999878
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
rotation = 0.7853982
scale = Vector2(3.445, 3.445)
pivot_offset = Vector2(20, 20)
color = Color(1, 0, 0, 1)

[node name="Text" type="Label" parent="NumericalPower/Viewport"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 64
text = "10"
horizontal_alignment = 1

[node name="Preview" type="TextureRect" parent="."]
visible = false
offset_right = 40.0
offset_bottom = 40.0
texture = SubResource("ViewportTexture_6vd22")
